name: GitHub Actions Demo
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: windows-latest
    steps:
      - run: echo "Downloading MONO_INSTALLER"
      - name: Installing Dependencies
        uses: actions/checkout@v2
      - run: echo "Installing Mono"
      - run: curl -O -J "https://download.mono-project.com/archive/6.10.0/windows-installer/mono-6.10.0.104-x64-0.msi"
      - run: msiexec -i "mono-6.10.0.104-x64-0.msi" -passive -qn -norestart
      - name: Building project
      - run: cmake . -DCMAKE_GENERATOR_PLATFORM=x64
      - run: cmake --build . --config Release --target Sandbox
      - run: cmake --build . --config Release --target TestNiceDay
      - run: cmake -DTT_TARGET_DIR="$TRAVIS_BUILD_DIR/TestNiceDay/Release" -P CopyMonoDll.cmake
      - run: ctest --output-on-failure
